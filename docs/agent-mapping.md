# Agent Mapping

This document maps each agent in the plugin to its role, model, and namespace.

## Inventory

### Persona agents (main-session injection)

These agents define persona behavior injected into the main Claude Code session via hooks.

| Agent | Category | Model | Claude Code equivalent |
|---|---|---|---|
| Sisyphus | orchestrator | opus | `claude-agent-kit:sisyphus` |
| Hephaestus | executor/autonomous | opus | `claude-agent-kit:hephaestus` |
| Atlas | execution coordinator | sonnet | `claude-agent-kit:atlas` |
| Prometheus | planning | opus | `claude-agent-kit:prometheus` |

### Subagents (forked specialist workers)

These agents run as forked subagents via `Task()` or `context: fork` skills.

| Agent | Category | Model | Claude Code equivalent |
|---|---|---|---|
| Explore | code search | haiku | `claude-agent-kit:explore` |
| Librarian | external research | sonnet | `claude-agent-kit:librarian` |
| Oracle | advisor | opus | `claude-agent-kit:oracle` |
| Metis | pre-planning | opus | `claude-agent-kit:metis` |
| Momus | plan review | opus | `claude-agent-kit:momus` |

### Agents not yet ported

| Agent | Category | Original cost | Notes |
|---|---|---|---|
| Multimodal-Looker | vision/PDF | cheap | Pending multimodal support |

## Agent metadata fields

Agents support optional metadata frontmatter fields used by the dynamic prompt generation system (`scripts/build_sections.py`). These fields drive the context-aware prompt sections injected at session start.

| Field | Required | Values | Description |
|---|---|---|---|
| `category` | Yes (all agents) | `persona`, `search`, `research`, `advisor`, `reviewer`, `preplanning` | Agent classification. Persona agents are filtered out of subagent routing tables. |
| `costTier` | Subagents only | `free`, `cheap`, `moderate`, `expensive` | Cost tier for tool selection table ordering. |
| `keyTrigger` | Optional | Free text | Pattern that triggers automatic delegation to this agent. |
| `useWhen` | Optional | Semicolon-separated list | When to use this agent (populates usage guides). |
| `avoidWhen` | Optional | Semicolon-separated list | When NOT to use this agent (populates usage guides). |
| `delegationDomains` | Optional | Semicolon-separated list | Domain keywords for the delegation routing table. |

## Two-layer prompt composition

Persona agents use a two-layer prompt system:

```
What Claude sees = [Dynamic sections from hook] + [Static agent .md body]
                           |                              |
                   Generated by Python script      Loaded by Claude Code
                   (scripts/build_sections.py)     from agents/<name>.md
```

- **Static layer** (agent `.md` files): Identity, behavioral framework, workflow phases, constraints, tone.
- **Dynamic layer** (hook output): Agent routing tables, skill delegation guides, tool selection, key triggers — everything that depends on what agents/skills are available at runtime.

Per-persona section composition:

| Persona | Dynamic Sections |
|---|---|
| Sisyphus | key-triggers, tool-selection, explore-guide, librarian-guide, skills-guide, delegation-table, oracle-guide, hard-blocks, anti-patterns |
| Hephaestus | key-triggers, tool-selection, explore-guide, librarian-guide, skills-guide, delegation-table, oracle-guide, hard-blocks, anti-patterns |
| Atlas | tool-selection, skills-guide, delegation-table |
| Prometheus | *(none — fully static)* |

## Tool surface translation

| Reference | Claude Code equivalent |
|---|---|
| `Task(<agent-name>)` | Fork a specialist subagent via `context: fork` skills |
| Task/todo enforcement | Claude Code tasks (agent teams) or explicit checklists; optional hooks for gates |
| External tools | Replace with Claude Code tools: `Read`, `Edit`, `Write`, `Bash`, `Glob`, `Grep`, plus MCP tools |

## Prompt suitability notes

Common changes required when porting prompts:
- Use Claude Code tool names in all agent prompts.
- Replace background-task manager language with Claude Code subagent behavior (foreground/background limitations).
